@using Client.Shared
@using Newtonsoft.Json.Linq
					
@using Syncfusion.EJ2.Blazor
@using Syncfusion.EJ2.Blazor.RichTextEditor
@using Syncfusion.EJ2.Blazor.Inputs

<AuthorizeView>
<Authorized>
<Loading InProgress="IsLoading"></Loading>
<div class="card mt-2 bg-dark">
    <div class="card-body">
        <div class="input-group">
            <div class="input-group-prepend">
                <span class="input-group-text" id="basic-addon3">Github Readme</span>
            </div>
            <input type="text" class="form-control" id="basic-url1" aria-describedby="basic-addon3" @bind-value:event="oninput" @bind-value="@owner" placeholder="Add Owner" @onfocusout="async () => await GetRepos()"/>
            <input type="text" class="form-control" id="basic-url2" aria-describedby="basic-addon4" @bind-value:event="oninput" @bind-value="@repoName" placeholder="Add Repo" />

            <a class="btn btn-primary ml-sm-1" @onclick="async () => await GetReadme()" href="">Show</a>
        </div>
    </div>
</div>

@if (_readme != null) {

    <div class="main mt-3">
        <div class="card">
            <div class="card-body">

            <EjsRichTextEditor @bind-Value="@updatedContent">
            @Markdig.Markdown.ToHtml(_readme.readmeContent)
            </EjsRichTextEditor>

            <button class="e-btn" type="submit" @onclick="async () => await UpdateFile()">Submit</button>

            </div>
        </div>
    </div>
}

@if(_reposList != null){
    <div class="card">
        <div class="card-body">
            @foreach(var item in _reposList){
                <h5 class="card-title">
                    <a href="https://github.com/@item.FullName">@item.Name</a>
                    <span class="badge-primary p-1 rounded-lg">@item.StargazersCount <span class="iconify" data-icon="octicon:star"></span></span>
                </h5>
                <p class="card-text">@item.Description</p>
                <hr>
            }
        </div>
    </div>
}

    </Authorized>
</AuthorizeView>

@code {

}